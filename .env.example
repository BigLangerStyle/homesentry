# HomeSentry Configuration Template
# Copy this file to .env and update with your settings
# DO NOT commit .env file to Git (it contains secrets)

# ============================================================================
# Discord Alerts
# ============================================================================
# Create a webhook in Discord: Server Settings > Integrations > Webhooks
# Copy the webhook URL and paste it here
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_HERE

# Alert behavior configuration
ALERTS_ENABLED=true                # Enable/disable all Discord alerts
ALERT_COOLDOWN_MINUTES=30          # Minimum minutes between repeat alerts for same issue

# ============================================================================
# Polling Intervals (seconds)
# ============================================================================
# How often to collect system metrics and check services
POLL_INTERVAL=60

# How often to check SMART drive health (future feature)
SMART_POLL_INTERVAL=600

# ============================================================================
# Service URLs to Monitor
# ============================================================================
# Update these with your actual server IP and ports
# MediaServer IP: 192.168.1.8


# Service health check configuration
SERVICE_CHECK_TIMEOUT=10          # Seconds to wait for HTTP response
SERVICE_SLOW_THRESHOLD=3000       # Milliseconds - responses over this are marked as WARN

# Plex Media Server
PLEX_URL=http://192.168.1.8:32400

# Jellyfin Media Server
JELLYFIN_URL=http://192.168.1.8:8096

# Pi-hole DNS and Web Interface
PIHOLE_URL=http://192.168.1.8:80

# Home Assistant (optional - leave empty to disable)
HOMEASSISTANT_URL=http://192.168.1.8:8123

# qBittorrent (optional - leave empty to disable)
QBITTORRENT_URL=http://192.168.1.8:8080

# Tautulli - Plex monitoring and statistics (optional - leave empty to disable)
TAUTULLI_URL=http://192.168.1.8:8181

# ============================================================================
# Alert Thresholds
# ============================================================================
# CPU monitoring
CPU_WARN_THRESHOLD=80             # Warn when CPU usage > 80%
CPU_FAIL_THRESHOLD=95             # Critical when CPU usage > 95%

# Memory monitoring
MEMORY_WARN_THRESHOLD=85          # Warn when memory usage > 85%
MEMORY_FAIL_THRESHOLD=95          # Critical when memory usage > 95%

# Disk space warnings
DISK_WARN_PERCENT=85              # Warn when disk usage > 85%
DISK_FAIL_PERCENT=95              # Critical when disk usage > 95%
DISK_WARN_GB=50                   # Warn when free space < 50GB
DISK_FAIL_GB=10                   # Critical when free space < 10GB

# Service health monitoring
SERVICE_DOWN_WINDOW=120           # Wait 2 minutes before alerting on service down

# Container restart monitoring (future feature)
CONTAINER_RESTART_THRESHOLD=5     # Alert if container restarts > 5 times/hour

# ============================================================================
# Database
# ============================================================================
# Path to SQLite database file (relative to container)
DATABASE_PATH=/app/data/homesentry.db

# ============================================================================
# Logging
# ============================================================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ============================================================================
# Docker Container Monitoring
# ============================================================================
# Path to Docker socket (default: /var/run/docker.sock)
DOCKER_SOCKET_PATH=/var/run/docker.sock

# Enable/disable Docker container monitoring
DOCKER_COLLECTION_ENABLED=true

# Resource usage thresholds (optional, for future use)
DOCKER_CPU_WARN_THRESHOLD=80
DOCKER_CPU_FAIL_THRESHOLD=95
DOCKER_MEMORY_WARN_THRESHOLD=80
DOCKER_MEMORY_FAIL_THRESHOLD=95

# ============================================================================
# SMART Drive Health Monitoring
# ============================================================================
# Enable/disable SMART drive health monitoring
SMART_COLLECTION_ENABLED=true

# Comma-separated list of drives to monitor
# Update with your actual drive paths
SMART_DEVICES=/dev/sda,/dev/sdb,/dev/sdc,/dev/sdd

# Temperature thresholds (Celsius)
# HDDs: Normal = 20-40°C, Warning = 50°C+, Critical = 60°C+
# SSDs: Normal = 20-50°C, Warning = 60°C+, Critical = 70°C+
SMART_TEMP_WARN_THRESHOLD=50
SMART_TEMP_FAIL_THRESHOLD=60

# How often to collect SMART metrics (seconds)
# SMART data doesn't change rapidly, so 10 minutes is reasonable
SMART_POLL_INTERVAL=600

# ============================================================================
# RAID Array Monitoring
# ============================================================================
# Enable/disable RAID array monitoring
RAID_COLLECTION_ENABLED=true

# Comma-separated list of RAID arrays to monitor
# Leave empty to auto-detect all mdadm arrays
# Example: RAID_ARRAYS=md0,md1
RAID_ARRAYS=md0

# How often to collect RAID metrics (seconds)
# More frequent than SMART (2 minutes) since array degradation is critical
RAID_POLL_INTERVAL=120

# ============================================================================
# Maintenance Windows
# ============================================================================
# Suppress alerts during scheduled downtime to prevent notification spam.
# Format: HH:MM-HH:MM (24-hour time)
# 
# Per-service maintenance windows (service-specific):
# JELLYFIN_MAINTENANCE_WINDOW=03:00-03:15
# HOMEASSISTANT_MAINTENANCE_WINDOW=03:00-03:15
# QBITTORRENT_MAINTENANCE_WINDOW=05:15-05:30
# TAUTULLI_MAINTENANCE_WINDOW=03:00-03:15
# PLEX_MAINTENANCE_WINDOW=03:00-03:15
# PIHOLE_MAINTENANCE_WINDOW=05:00-05:15

# Global maintenance window (affects ALL services):
# GLOBAL_MAINTENANCE_WINDOW=05:00-05:15

# Optional: Day-of-week filtering (0=Monday, 6=Sunday)
# If not specified, maintenance windows apply every day
# JELLYFIN_MAINTENANCE_DAYS=0,1,2,3,4,5,6  # Every day (default)
# GLOBAL_MAINTENANCE_DAYS=6  # Sundays only

# Notes:
# - Midnight-spanning windows are supported (e.g., "23:45-00:15")
# - Recovery alerts (FAIL → OK) are sent after maintenance window ends
# - Critical infrastructure alerts (SMART, RAID) are never suppressed
# - All events are logged to database, only Discord notifications suppressed
# - Service names are case-insensitive (jellyfin = Jellyfin)

