# HomeSentry Configuration
# 
# IMPORTANT: This .env file is temporarily tracked for development convenience.
# It will be removed from Git tracking before the project is finalized.
# 
# For production use, copy .env.example and fill in your own values.

# ============================================================================
# Discord Alerts
# ============================================================================
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/1465095180150505472/cu-cFiKx0ZBjQYecwzC-v2WdByAxiT2FYxpaQ7V2Sdnd-mkYU6Bkd-lacDA31dXAT2dd

# Alert behavior configuration
ALERTS_ENABLED=true
ALERT_COOLDOWN_MINUTES=30

# ============================================================================
# Polling Intervals (seconds)
# ============================================================================
POLL_INTERVAL=60
SMART_POLL_INTERVAL=600

# ============================================================================
# Service URLs to Monitor
# ============================================================================
# MediaServer IP: 192.168.1.8

# Service health check configuration
SERVICE_CHECK_TIMEOUT=10
SERVICE_SLOW_THRESHOLD=3000

# Plex Media Server
PLEX_URL=http://192.168.1.8:32400

# Jellyfin Media Server
JELLYFIN_URL=http://192.168.1.8:8096

# Pi-hole DNS and Web Interface
PIHOLE_URL=http://192.168.1.8:80

# Home Assistant
HOMEASSISTANT_URL=http://192.168.1.8:8123

# qBittorrent
QBITTORRENT_URL=http://192.168.1.8:8080

# Tautulli - Plex monitoring and statistics
TAUTULLI_URL=http://192.168.1.8:8181

# ============================================================================
# Alert Thresholds
# ============================================================================
# CPU monitoring
CPU_WARN_THRESHOLD=80
CPU_FAIL_THRESHOLD=95

# Memory monitoring
MEMORY_WARN_THRESHOLD=85
MEMORY_FAIL_THRESHOLD=95

# Disk space warnings
DISK_WARN_PERCENT=85
DISK_FAIL_PERCENT=95
DISK_WARN_GB=50
DISK_FAIL_GB=10

# Service health monitoring
SERVICE_DOWN_WINDOW=120

# Container restart monitoring
CONTAINER_RESTART_THRESHOLD=5

# ============================================================================
# Database
# ============================================================================
DATABASE_PATH=/app/data/homesentry.db

# ============================================================================
# Logging
# ============================================================================
LOG_LEVEL=INFO

# ============================================================================
# Docker Container Monitoring
# ============================================================================
DOCKER_SOCKET_PATH=/var/run/docker.sock
DOCKER_COLLECTION_ENABLED=true
DOCKER_CPU_WARN_THRESHOLD=80
DOCKER_CPU_FAIL_THRESHOLD=95
DOCKER_MEMORY_WARN_THRESHOLD=80
DOCKER_MEMORY_FAIL_THRESHOLD=95

# ============================================================================
# SMART Drive Health Monitoring
# ============================================================================
SMART_COLLECTION_ENABLED=true
SMART_DEVICES=/dev/sda,/dev/sdb,/dev/sdc,/dev/sdd
SMART_TEMP_WARN_THRESHOLD=50
SMART_TEMP_FAIL_THRESHOLD=60
SMART_POLL_INTERVAL=600

# ============================================================================
# RAID Array Monitoring
# ============================================================================
RAID_COLLECTION_ENABLED=true
RAID_ARRAYS=md0
RAID_POLL_INTERVAL=120

# ============================================================================
# Maintenance Windows
# ============================================================================
# Suppress alerts during scheduled downtime to prevent notification spam.
# Format: HH:MM-HH:MM (24-hour time)

# Per-service maintenance windows:
# Jellyfin, Home Assistant, and Tautulli restart daily at 3:00 AM
JELLYFIN_MAINTENANCE_WINDOW=03:00-03:15
HOMEASSISTANT_MAINTENANCE_WINDOW=03:00-03:15
TAUTULLI_MAINTENANCE_WINDOW=03:00-03:15

# qBittorrent restarts daily at 5:15 AM (via cron)
QBITTORRENT_MAINTENANCE_WINDOW=05:15-05:30

# Router reboot affects all services at 5:00 AM
GLOBAL_MAINTENANCE_WINDOW=05:00-05:15

# Optional: Day-of-week filtering (0=Monday, 6=Sunday)
# If not specified, maintenance windows apply every day
# Examples:
# JELLYFIN_MAINTENANCE_DAYS=0,1,2,3,4,5,6  # Every day (default)
# GLOBAL_MAINTENANCE_DAYS=6  # Sundays only

# Notes:
# - Midnight-spanning windows are supported (e.g., "23:45-00:15")
# - Recovery alerts (FAIL → OK) are sent after maintenance window ends
# - Critical infrastructure alerts (SMART, RAID) are never suppressed
# - All events are logged to database, only Discord notifications suppressed
# - Service names are case-insensitive (jellyfin = Jellyfin)
# - Plex and Pi-hole don't need maintenance windows (no scheduled restarts)

# ============================================================================
# Sleep Schedule & Morning Summary
# ============================================================================
# Complete alert suppression during sleep hours with optional morning digest.
SLEEP_SCHEDULE_ENABLED=false
SLEEP_SCHEDULE_START=00:00
SLEEP_SCHEDULE_END=07:30
SLEEP_SUMMARY_ENABLED=true
SLEEP_SUMMARY_TIME=07:30
SLEEP_ALLOW_CRITICAL_ALERTS=false

# ============================================================================
# App Modules - Application-Specific Monitoring
# ============================================================================

# ----------------------------------------------------------------------------
# Home Assistant Module
# ----------------------------------------------------------------------------
# Monitors Home Assistant smart home platform via REST API
# Tracks: entity count, automation count, API response time

# REQUIRED: Home Assistant API endpoint
HOMEASSISTANT_API_URL=http://192.168.1.8:8123

# REQUIRED: Long-lived access token from Home Assistant
HOMEASSISTANT_API_TOKEN=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJmM2JjNjYwZjkxYTM0NDFmODBkNGFiYmYzNWNkMDBmYiIsImlhdCI6MTc2OTgxMDcyMSwiZXhwIjoyMDg1MTcwNzIxfQ.BIgX-3lXqYziSqQyRokI7Fbvw-XcsmS34fD-QEiWEFk

# OPTIONAL: Alert thresholds for Home Assistant metrics
HOMEASSISTANT_ENTITY_COUNT_WARN=500
HOMEASSISTANT_ENTITY_COUNT_FAIL=1000
HOMEASSISTANT_AUTOMATION_COUNT_WARN=100
HOMEASSISTANT_AUTOMATION_COUNT_FAIL=200
HOMEASSISTANT_TIMEOUT=10

# ----------------------------------------------------------------------------
# qBittorrent Module
# ----------------------------------------------------------------------------
# Monitors qBittorrent torrent client via Web API
# Tracks: active torrents, download/upload speeds, disk space, session stats

# REQUIRED: qBittorrent Web UI URL
QBITTORRENT_API_URL=http://192.168.1.8:8080

# REQUIRED: Web UI authentication
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=adminadmin

# OPTIONAL: Alert thresholds
QBITTORRENT_ACTIVE_TORRENTS_WARN=10
QBITTORRENT_ACTIVE_TORRENTS_FAIL=20
QBITTORRENT_DISK_FREE_WARN_GB=100
QBITTORRENT_DISK_FREE_FAIL_GB=50
QBITTORRENT_TIMEOUT=10

# ----------------------------------------------------------------------------
# Pi-hole Module
# ----------------------------------------------------------------------------
# Monitors Pi-hole DNS sinkhole for network-wide ad/tracker blocking
# Tracks: queries blocked, block percentage, active clients, blocklist size

# REQUIRED: Pi-hole Admin API URL
PIHOLE_API_URL=http://192.168.1.8:80

# REQUIRED for Pi-hole v6+: App password (get from web UI → Settings → API → Configure app password)
# ADD YOUR APP PASSWORD HERE:
PIHOLE_API_PASSWORD=7DuBCzVKKomlAJFUVT248pLKqIMO8kNHwa8KGnKNGQI=

# REQUIRED for bare-metal: Set to true (your Pi-hole is systemd, not Docker)
PIHOLE_BARE_METAL=true

# OPTIONAL: Block percentage thresholds
PIHOLE_BLOCKED_PERCENT_WARN=10
PIHOLE_BLOCKED_PERCENT_FAIL=5

# OPTIONAL: Active clients threshold (uncomment to enable)
# PIHOLE_ACTIVE_CLIENTS_WARN=50

# OPTIONAL: API timeout in seconds
PIHOLE_TIMEOUT=10
